<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tes tabel</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.5/css/dataTables.dataTables.css">

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.datatables.net/2.0.5/js/dataTables.js"></script>

    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js'></script>
    <link rel="stylesheet" href="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.css" />


    <style>
        /* Mengatur ukuran container kalender */
        

        button {
            padding: 8px 16px;
            cursor: pointer;
        }

        #renderRange {
            font-weight: bold;
            font-family: sans-serif;
        }
    </style>

</head>

<body>
    <div class="controls" style="margin: 20px; display: flex; gap: 10px; align-items: center;">
        <button onclick="prev()">Sebelumnya</button>
        <button onclick="today()">Hari Ini</button>
        <button onclick="next()">Berikutnya</button>
        <span id="renderRange"></span>
    </div>

    <div id="app" style="height: 90vh; margin: 20px; width: 100%;"></div>
    <script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.js"></script>
    <script>
        // Inisialisasi Instance Kalender
        const Calendar = tui.Calendar;
        const container = document.getElementById('app');

        const calendar = new Calendar(container, {
            defaultView: 'month',
            useFormPopup: true,   // Membuka form saat klik tanggal
            useDetailPopup: true, // Membuka detail saat klik event
            gridSelection: true,  // Bisa drag untuk pilih range tanggal
            timezone: {
                zones: [{ timezoneName: 'Asia/Jakarta', displayLabel: 'Jakarta' }],
            },
            // Opsi Tampilan
            month: {
                dayNames: ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'],
                startDayOfWeek: 1, // Minggu dimulai dari Senin
            },
        });

        // --- Navigasi ---
        function updateRenderRange() {
            const range = document.getElementById('renderRange');
            const viewName = calendar.getViewName();
            const date = calendar.getDate();
            range.innerText = `${date.getFullYear()} - ${date.getMonth() + 1}`;
        }

        function prev() {
            calendar.prev();
            updateRenderRange();
        }

        function next() {
            calendar.next();
            updateRenderRange();
        }

        function today() {
            calendar.today();
            updateRenderRange();
        }

        // --- Logika Event (Acara) ---

        // 1. Saat user membuat event baru lewat form pop-up
        calendar.on('beforeCreateEvent', (eventData) => {
            calendar.createEvents([
                {
                    ...eventData,
                    id: String(Date.now()), // ID unik sederhana
                },
            ]);
            console.log('Event Baru Dibuat:', eventData);
        });

        // 2. Saat user mengubah waktu event (drag & drop)
        calendar.on('beforeUpdateEvent', ({ event, changes }) => {
            calendar.updateEvent(event.id, event.calendarId, changes);
        });

        // 3. Saat user menghapus event
        calendar.on('beforeDeleteEvent', (event) => {
            calendar.deleteEvent(event.id, event.calendarId);
        });

        // Tampilkan data contoh awal
        calendar.createEvents([
            {
                id: '1',
                calendarId: 'cal1',
                title: 'Belajar Vanilla JS',
                category: 'time',
                start: '2026-01-25T09:00:00',
                end: '2026-01-25T11:00:00',
                backgroundColor: '#ff5583',
            }
        ]);

        updateRenderRange();
    </script>
</body>

</html>